; planet - Template basic config file

[Display]
; FullScreen = false + Decoration = false + no dimension -> Borderless FullScreen
Title           = planet
FullScreen      = true
Decoration      = false
Smoothing       = true
VSync           = true

[Resource]
Texture         = bundle: # bundle:planet.obr # ../data/texture
Sound           = bundle: # bundle:planet.obr # ../data/sound

[Mouse]
ShowCursor      = false

[Input]
KEY_ESCAPE      = Quit

[MainViewport]
Camera          = MainCamera
BackgroundColor = black

[MainCamera]
FrustumWidth    = % > Get Display ScreenHeight, > Get Display ScreenWidth, > / < <, > Get @ FrustumHeight, * < <
FrustumHeight   = 800
FrustumFar      = 2
FrustumNear     = 0
Position        = (0, 0, -1) ; Objects with -1 <= Z <= 1 will be visible
GroupList       = background # default

[Scene]
ChildList       = Arena # Dropper # Background
OnCreate        = Set Runtime Scene ^

[Object]

[Background]
Choices         = BackgroundHubble # BackgroundJWST
ChildList       = % > @, > Get < Choices, return <

[BackgroundHubble]
Group           = background
Graphic         = BackgroundHubbleGraphic
Position        = center
Pivot           = center
Scale           = 1.2
Alpha           = 0.1

[BackgroundJWST@BackgroundHubble]
Graphic         = BackgroundJWSTGraphic
Scale           = 0.75
Alpha           = 0.2

[BackgroundHubbleGraphic]
Texture         = hubble_veil.jpg
Pivot           = center

[BackgroundJWSTGraphic@BackgroundHubbleGraphic]
Texture         = jwst_uranus.png


; Play arena
;region-play

[Arena]
ChildList       = ArenaLeft # ArenaRight # ArenaBottom # ArenaTop # ArenaOutOfBounds

[ArenaLeft]
Graphic         = ArenaGraphic
Body            = ArenaBody
Size            = (10, 550)
Position        = (-300, -200)
Pivot           = top left

[ArenaRight@ArenaLeft]
Position        = (300, -200)
Pivot           = top right

[ArenaBottom@ArenaLeft]
Size            = (600, 10)
Position        = (-300, 350)

[ArenaGraphic]
Texture         = pixel

[ArenaBody]
Dynamic         = false
PartList        = ArenaBodyPart

[ArenaBodyPart]
Type            = box
Friction        = 0.1
Restitution     = 0
SelfFlags       = wall
CheckMask       = planet
Solid           = true

[ArenaTop@ArenaBottom]
; Like the top, but this is barely visible and is not solid
Position        = @ArenaLeft.Position
Alpha           = 0.1
Body            = ArenaSensorBody

[ArenaSensorBody]
Dynamic         = false
PartList        = ArenaSensorBodyPart

[ArenaSensorBodyPart]
Type            = box
SelfFlags       = wall
CheckMask       = planet
Solid           = false

;endregion-play

; Dropper
;region-dropper

[Dropper]
Graphic         = DropperGraphic
Position        = (0, -240)
Drop            = Planet1 # Planet2 # Planet3
MinDropWait     = 0.5 ; In seconds
ChildList       = DropperPointer
OnCreate        = > @, Input.EnableSet < true
OnDelete        = > @, Input.EnableSet < false

; Movement specs
MinX            = % > Get ArenaLeft Position, > Vector.X <, > + < 25, return <
MaxX            = % > Get ArenaRight Position, > Vector.X <, > - < 25, return <
MaxSpeed        = (300, 0, 0)

; Game event handlers
EventHandlerList= DropperEvents

; Inputs
; Keyboard
KEY_SPACE       = Drop
KEY_LEFT        = Left
KEY_RIGHT       = Right
; Joystick/gamepad
JOY_A           = Drop
-JOY_LX         = Left
+JOY_LX         = Right
; Mouse
MOUSE_LEFT      = Drop
-MOUSE_X        = Left
+MOUSE_X        = Right

[DropperEvents]
GameOver        = Object.AddFX ^ FadeAwayFX true true, > Object.GetName ^, Input.EnableSet < false, Object.SetLifeTime ^ fx

[DropperGraphic]
Texture         = face_a.png
Pivot           = bottom left

[DropperPointer]
Graphic         = DropperPointerGraphic
Position        = top left -> bottom left
Scale           = 0.5

[DropperPointerGraphic]
Texture         = purple_hand_point.png
Pivot           = center
Flip            = x

[FadeAwayFX]
SlotList        = FadeOut

[FadeOut]
Type            = alpha
Curve           = linear
EndTime         = 5
StartValue      = 1
EndValue        = 0
Absolute        = true

;endregion-dropper

; Planets
;region-planets

[Planet1@Planet]
Scale           = 0.03
Next            = Planet2

[Planet2@Planet]
Next            = Planet3
Scale           = 0.05
Texture         = Planets/planet02.png

[Planet3@Planet]
Next            = Planet4
Scale           = 0.07
Texture         = Planets/planet03.png

[Planet4@Planet]
Next            = Planet5
Scale           = 0.11
Texture         = Planets/planet04.png

[Planet5@Planet]
Next            = Planet6
Scale           = 0.15
Texture         = Planets/planet05.png

[Planet6@Planet]
Next            = Planet7
Scale           = 0.2
Texture         = Planets/planet06.png

[Planet7@Planet]
Next            = Planet8
Scale           = 0.25
Texture         = Planets/planet07.png

[Planet8@Planet]
Next            = Planet9
Scale           = 0.3
Texture         = Planets/planet08.png

[Planet9@Planet]
Stay            = true
Scale           = 0.35
Texture         = Planets/planet09.png

[Planet]
Body            = PlanetBody
Graphic         = @
Texture         = Planets/planet01.png
Pivot           = center
OnCreate        = > Get Runtime Scene, Object.SetOwner ^ <
EventHandlerList= PlanetEvents

[PlanetEvents]
GameOver        = Object.SetLifeTime ^ 0.1, > Object.GetPosition ^, > Object.Create PlanetExplosion, Object.SetPosition < <

[PlanetBody]
LinearDamping   = 0.5
AngularDamping  = 0.9
Dynamic         = true
CustomGravity   = (0, 1600, 0)
PartList        = PlanetBodyPart

[PlanetBodyPart]
Type            = sphere
Radius          = 510
Friction        = 0.7
Restitution     = 0
Density         = 0.1
SelfFlags       = planet
CheckMask       = planet # wall
Solid           = true

[PlanetExplosion]
Spawner         = @
Object          = ExplosionParticle
TotalObject     = 50
WaveSize        = @.TotalObject

[ExplosionParticle]
Graphic         = ExplosionParticleGraphic
Size            = (3, 3) ~ (10, 10)
AngularVelocity = -360 ~ 360
Color           = yellow # red # orange
Alpha           = 0.5 ~ 1
Rotation        = 0 ~ 360
UseRelativeSpeed= true
Speed           = (150, 0) ~ (500, 0)
LifeTime        = 1 ~ 2

[ExplosionParticleGraphic]
Texture         = pixel
;endregion-planets
